# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

## –®–∞–≥ 1: –î–æ–∂–¥–∞—Ç—å—Å—è –¥–µ–ø–ª–æ—è Netlify (~2 –º–∏–Ω—É—Ç—ã)

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://app.netlify.com/sites/sparkling-cupcake-940504/deploys
2. –î–æ–∂–¥–∏—Ç–µ—Å—å, –ø–æ–∫–∞ —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–µ–ø–ª–æ—è —Å—Ç–∞–Ω–µ—Ç **Published** (–∑–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –∫–æ–º–º–∏—Ç–µ –µ—Å—Ç—å: `Fix: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è ingest-knowledge...`

## –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

‚ö†Ô∏è **–ë–ï–ó –≠–¢–û–ì–û –®–ê–ì–ê –ù–ò–ß–ï–ì–û –ù–ï –ë–£–î–ï–¢ –†–ê–ë–û–¢–ê–¢–¨!**

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://supabase.com/dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. SQL Editor (–ª–µ–≤–æ–µ –º–µ–Ω—é)
4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–í–ï–°–¨** —Ç–µ–∫—Å—Ç –∏–∑ —Ñ–∞–π–ª–∞: `bot/functions/shared/database/migration_rag_setup.sql`
6. –í—Å—Ç–∞–≤—å—Ç–µ –∏ –Ω–∞–∂–º–∏—Ç–µ **Run**

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Success. No rows returned
```

## –®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ Netlify —Ñ—É–Ω–∫—Ü–∏—é

```bash
curl -X POST "https://sparkling-cupcake-940504.netlify.app/.netlify/functions/ingest-knowledge" \
  -H "Content-Type: application/json" \
  -d '{"reset": false}' \
  -w "\nHTTP: %{http_code}\n"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{"ok":true,"inserted":45,"reset":false}
HTTP: 200
```

–ï—Å–ª–∏ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–æ–ª—É—á–∞–µ—Ç–µ –æ—à–∏–±–∫—É - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Netlify –ª–æ–≥–∏:
https://app.netlify.com/sites/sparkling-cupcake-940504/functions/ingest-knowledge

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Supabase

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ SQL Editor:

```sql
SELECT COUNT(*) as total FROM knowledge_chunks;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `total: 45` (35 —Å–∏–º–≤–æ–ª–æ–≤ + 10 –∞—Ä—Ö–µ—Ç–∏–ø–æ–≤)

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
```sql
SELECT category, COUNT(*) as count 
FROM knowledge_chunks 
GROUP BY category;
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- symbols: ~35
- archetypes: ~10

## –®–∞–≥ 5: –°–Ω—è—Ç—å –±–æ—Ç–∞ —Å –ø–∞—É–∑—ã

1. https://app.netlify.com/sites/sparkling-cupcake-940504/configuration/env
2. –ù–∞–π—Ç–∏ `BOT_PAUSED`
3. –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ `false` –∏–ª–∏ **–£–¥–∞–ª–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é**
4. Save

## –®–∞–≥ 6: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
–ú–Ω–µ —Å–Ω–∏–ª–∞—Å—å –≤–æ–¥–∞, –∏ —è –ø–∞–¥–∞–ª –≤–Ω–∏–∑
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
https://app.netlify.com/sites/sparkling-cupcake-940504/functions/analyze-dream-background

–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
```
[analyze-dream-background] RAG matches: X
```

–ï—Å–ª–∏ X > 0 ‚Üí **–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ**

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå HTTP 500 –ø—Ä–∏ ingest

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–æ–∂–¥–∏—Ç–µ –µ—â–µ 1-2 –º–∏–Ω—É—Ç—ã (–¥–µ–ø–ª–æ–π –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏)

### ‚ùå "Source JSON not found"

**–†–µ—à–µ–Ω–∏–µ:** –§–∞–π–ª –Ω–µ –ø–æ–ø–∞–ª –≤ –¥–µ–ø–ª–æ–π. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ netlify.toml:
```toml
included_files = ["docs/dream_symbols_archetypes.json"]
```

### ‚ùå "match_knowledge RPC not found"

**–†–µ—à–µ–Ω–∏–µ:** –ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ SQL –º–∏–≥—Ä–∞—Ü–∏—è (–®–∞–≥ 2)! –≠—Ç–æ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô —à–∞–≥!

### ‚ùå Gemini API location error

–≠—Ç–æ –Ω–æ—Ä–º–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ Netlify —Ñ—É–Ω–∫—Ü–∏—é.

