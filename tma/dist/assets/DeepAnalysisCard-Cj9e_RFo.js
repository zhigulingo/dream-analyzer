import{b as F,c as b,e as t,f as s,n as g,h as l,g as c,t as d,i as E,F as $,v as z,m as M,r as k,G as H,q as S,w as L,y as V,A as I}from"./main-D9q8tcSZ.js";import{L as T}from"./PersonalAccount-BEqHWPDV.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./notifications-C2JzekkY.js";const N={key:0,class:"progress-header"},q={key:0,class:"progress-label"},R={key:1,class:"progress-percentage"},G={key:0,class:"progress-shimmer"},O={key:1,class:"progress-steps"},J={class:"step-indicator"},K={key:1,class:"step-check"},Q={key:2,class:"step-number"},U={class:"step-content"},W={class:"step-title"},X={key:0,class:"step-description"},Y={key:1,class:"step-duration"},Z={key:3,class:"progress-details"},x={class:"detail-key"},ee={class:"detail-value"},se=F({__name:"ProgressBar",props:{progress:{default:0},label:{},variant:{default:"primary"},size:{default:"md"},animated:{type:Boolean,default:!0},showPercentage:{type:Boolean,default:!1},steps:{},currentStep:{default:0},statusMessage:{},statusType:{default:"info"},details:{},showDetails:{type:Boolean,default:!1},rounded:{type:Boolean,default:!0}},setup(u){const r=u,p=b(()=>{const e=["progress-wrapper"];return r.size&&e.push(`progress-${r.size}`),e.join(" ")}),f=b(()=>{const e=["progress-track-base"];return r.rounded&&e.push("rounded-full"),e.join(" ")}),m=b(()=>{const e=["progress-fill-base"];switch(r.rounded&&e.push("rounded-full"),r.variant){case"success":e.push("bg-green-500");break;case"warning":e.push("bg-yellow-500");break;case"error":e.push("bg-red-500");break;default:e.push("bg-[#5461FF]")}return e.join(" ")}),h=b(()=>{const e=["status-base"];switch(r.statusType){case"success":e.push("text-green-600");break;case"warning":e.push("text-yellow-600");break;case"error":e.push("text-red-600");break;default:e.push("text-gray-600")}return e.join(" ")}),v=e=>{var a,i;return r.steps?((a=r.steps[e])==null?void 0:a.status)==="loading"||r.currentStep===e&&((i=r.steps[e])==null?void 0:i.status)!=="completed":!1},y=e=>{var a;return r.steps?((a=r.steps[e])==null?void 0:a.status)==="completed"||e<r.currentStep:!1},w=e=>{var i,o;const a=["step-base"];return y(e)?a.push("step-completed"):v(e)?a.push("step-loading"):((o=(i=r.steps)==null?void 0:i[e])==null?void 0:o.status)==="error"?a.push("step-error"):a.push("step-pending"),a.join(" ")},n=e=>r.variant==="primary"?"primary":r.variant;return(e,a)=>(s(),t("div",{class:g(["progress-container",p.value])},[e.label||e.showPercentage?(s(),t("div",N,[e.label?(s(),t("div",q,d(e.label),1)):l("",!0),e.showPercentage?(s(),t("div",R,d(Math.round(e.progress))+"%",1)):l("",!0)])):l("",!0),c("div",{class:g(["progress-track",f.value])},[c("div",{class:g(["progress-fill",m.value]),style:E({width:`${e.progress}%`})},[e.animated?(s(),t("div",G)):l("",!0)],6)],2),e.steps&&e.steps.length?(s(),t("div",O,[(s(!0),t($,null,z(e.steps,(i,o)=>(s(),t("div",{key:o,class:g(["progress-step",w(o)])},[c("div",J,[v(o)?(s(),M(T,{key:0,size:"xs",variant:n()},null,8,["variant"])):y(o)?(s(),t("div",K,"✓")):(s(),t("div",Q,d(o+1),1))]),c("div",U,[c("div",W,d(i.title),1),i.description?(s(),t("div",X,d(i.description),1)):l("",!0),i.duration&&v(o)?(s(),t("div",Y," ~"+d(i.duration),1)):l("",!0)])],2))),128))])):l("",!0),e.statusMessage?(s(),t("div",{key:2,class:g(["progress-status",h.value])},d(e.statusMessage),3)):l("",!0),e.details&&e.showDetails?(s(),t("div",Z,[(s(!0),t($,null,z(e.details,(i,o)=>(s(),t("div",{key:o,class:"detail-item"},[c("span",x,d(o)+":",1),c("span",ee,d(i),1)]))),128))])):l("",!0)],2))}}),te=j(se,[["__scopeId","data-v-1915e01c"]]),re={key:0,class:"mt-2 text-sm opacity-80"},ae={key:1,class:"mt-4"},ie={key:2,class:"mt-4"},oe={key:3,class:"mt-4 p-4 bg-white/10 rounded-lg text-sm"},ne={class:"text-xs leading-relaxed"},le={key:4,class:"mt-4 p-4 bg-red-500/20 rounded-lg text-sm"},ue=F({__name:"DeepAnalysisCard",props:["userStore"],setup(u){const r=u,p=k(!1),f=k(0),m=k(0),h=k([{title:"Сбор данных",description:"Получение последних 5 снов",duration:"2-3 сек"},{title:"Анализ паттернов",description:"Поиск повторяющихся тем",duration:"8-12 сек"},{title:"Глубокая интерпретация",description:"Психологический анализ",duration:"10-15 сек"},{title:"Формирование отчета",description:"Создание персонального анализа",duration:"3-5 сек"}]);H(()=>{var n;return(n=r.userStore)==null?void 0:n.isDoingDeepAnalysis},n=>{n?(f.value=0,m.value=0,v()):setTimeout(()=>{f.value=0,m.value=0,h.value.forEach(e=>e.status="pending")},2e3)});const v=()=>{const n=(e,a)=>{m.value=e,f.value=a,h.value.forEach((i,o)=>{o<e?i.status="completed":o===e?i.status="loading":i.status="pending"})};setTimeout(()=>n(0,15),500),setTimeout(()=>n(1,35),2e3),setTimeout(()=>n(2,65),5e3),setTimeout(()=>n(3,90),12e3)},y=()=>{p.value=!p.value,window.triggerHaptic&&window.triggerHaptic("light")},w=()=>{var n,e,a;(n=r.userStore)!=null&&n.canAttemptDeepAnalysis&&(window.triggerHaptic&&window.triggerHaptic("medium"),((a=(e=r.userStore)==null?void 0:e.profile)==null?void 0:a.deep_analysis_credits)>0?r.userStore.performDeepAnalysis():r.userStore.initiateDeepAnalysisPayment())};return(n,e)=>{var a,i,o,_,A,C;return s(),t("article",{class:g(["relative rounded-xl bg-gradient-to-br from-[#9C41FF] to-[#C03AFF] text-white overflow-hidden transition-all cursor-pointer",[p.value?"pb-20":"py-6"]]),onClick:y},[c("div",{class:g(["px-8 md:px-16",[p.value?"pt-8":""]])},[e[1]||(e[1]=c("h3",{class:"text-xl font-bold"},"Глубокий Анализ",-1)),e[2]||(e[2]=c("p",{class:"mt-1"},"Получите комплексный анализ ваших последних 5 снов.",-1)),(i=(a=u.userStore)==null?void 0:a.profile)!=null&&i.deep_analysis_credits?(s(),t("div",re," У вас: "+d(u.userStore.profile.deep_analysis_credits)+" кредит(ов) анализа ",1)):l("",!0),(o=u.userStore)!=null&&o.isInitiatingDeepPayment?(s(),t("div",ae,[S(T,{size:"xs",variant:"white",label:"Создаем счёт..."})])):(_=u.userStore)!=null&&_.isDoingDeepAnalysis?(s(),t("div",ie,[S(te,{progress:f.value,label:"Глубокий анализ",steps:h.value,currentStep:m.value,variant:"white",size:"sm",showPercentage:"",animated:""},null,8,["progress","steps","currentStep"])])):l("",!0),(A=u.userStore)!=null&&A.deepAnalysisResult?(s(),t("div",oe,[e[0]||(e[0]=c("h4",{class:"font-semibold mb-2"},"Результат анализа:",-1)),c("p",ne,d(u.userStore.deepAnalysisResult),1)])):l("",!0),(C=u.userStore)!=null&&C.deepAnalysisError?(s(),t("div",le," ⚠️ "+d(u.userStore.deepAnalysisError),1)):l("",!0)],2),S(I,{name:"fade"},{default:L(()=>{var D,P,B;return[p.value&&((D=u.userStore)!=null&&D.canAttemptDeepAnalysis)?(s(),t("button",{key:0,class:"absolute bottom-4 left-4 right-4 bg-white/20 hover:bg-white/30 text-white rounded-xl py-3 font-semibold transition-colors",onClick:V(w,["stop"])},d(((B=(P=u.userStore)==null?void 0:P.profile)==null?void 0:B.deep_analysis_credits)>0?"Выполнить анализ":"Получить анализ (1 ⭐️)"),1)):l("",!0)]}),_:1})],2)}}}),fe=j(ue,[["__scopeId","data-v-fcb7f69a"]]);export{fe as default};
