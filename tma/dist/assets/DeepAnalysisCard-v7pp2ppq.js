import{d as F,c as b,a as o,o as r,n as p,e as u,b as c,t as d,f as E,F as x,A as B,k as j,r as k,E as M,s as z,C as H}from"./main-Zfg8tELx.js";import{L as $}from"./PersonalAccount-DEs1-xrx.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={key:0,class:"progress-header"},V={key:0,class:"progress-label"},I={key:1,class:"progress-percentage"},N={key:0,class:"progress-shimmer"},q={key:1,class:"progress-steps"},O={class:"step-indicator"},G={key:1,class:"step-check"},J={key:2,class:"step-number"},K={class:"step-content"},Q={class:"step-title"},R={key:0,class:"step-description"},U={key:1,class:"step-duration"},W={key:3,class:"progress-details"},X={class:"detail-key"},Y={class:"detail-value"},Z=F({__name:"ProgressBar",props:{progress:{default:0},label:{},variant:{default:"primary"},size:{default:"md"},animated:{type:Boolean,default:!0},showPercentage:{type:Boolean,default:!1},steps:{},currentStep:{default:0},statusMessage:{},statusType:{default:"info"},details:{},showDetails:{type:Boolean,default:!1},rounded:{type:Boolean,default:!0}},setup(s){const t=s,g=b(()=>{const e=["progress-wrapper"];return t.size&&e.push(`progress-${t.size}`),e.join(" ")}),f=b(()=>{const e=["progress-track-base"];return t.rounded&&e.push("rounded-full"),e.join(" ")}),h=b(()=>{const e=["progress-fill-base"];switch(t.rounded&&e.push("rounded-full"),t.variant){case"success":e.push("bg-green-500");break;case"warning":e.push("bg-yellow-500");break;case"error":e.push("bg-red-500");break;default:e.push("bg-[#5461FF]")}return e.join(" ")}),m=b(()=>{const e=["status-base"];switch(t.statusType){case"success":e.push("text-green-600");break;case"warning":e.push("text-yellow-600");break;case"error":e.push("text-red-600");break;default:e.push("text-gray-600")}return e.join(" ")}),v=e=>{var n,a;return t.steps?((n=t.steps[e])==null?void 0:n.status)==="loading"||t.currentStep===e&&((a=t.steps[e])==null?void 0:a.status)!=="completed":!1},y=e=>{var n;return t.steps?((n=t.steps[e])==null?void 0:n.status)==="completed"||e<t.currentStep:!1},w=e=>{var a,i;const n=["step-base"];return y(e)?n.push("step-completed"):v(e)?n.push("step-loading"):((i=(a=t.steps)==null?void 0:a[e])==null?void 0:i.status)==="error"?n.push("step-error"):n.push("step-pending"),n.join(" ")},l=e=>t.variant==="primary"?"primary":t.variant;return(e,n)=>(r(),o("div",{class:p(["progress-container",g.value])},[s.label||s.showPercentage?(r(),o("div",L,[s.label?(r(),o("div",V,d(s.label),1)):u("",!0),s.showPercentage?(r(),o("div",I,d(Math.round(s.progress))+"%",1)):u("",!0)])):u("",!0),c("div",{class:p(["progress-track",f.value])},[c("div",{class:p(["progress-fill",h.value]),style:E({width:`${s.progress}%`})},[s.animated?(r(),o("div",N)):u("",!0)],6)],2),s.steps&&s.steps.length?(r(),o("div",q,[(r(!0),o(x,null,B(s.steps,(a,i)=>(r(),o("div",{key:i,class:p(["progress-step",w(i)])},[c("div",O,[v(i)?(r(),j($,{key:0,size:"xs",variant:l()},null,8,["variant"])):y(i)?(r(),o("div",G,"✓")):(r(),o("div",J,d(i+1),1))]),c("div",K,[c("div",Q,d(a.title),1),a.description?(r(),o("div",R,d(a.description),1)):u("",!0),a.duration&&v(i)?(r(),o("div",U," ~"+d(a.duration),1)):u("",!0)])],2))),128))])):u("",!0),s.statusMessage?(r(),o("div",{key:2,class:p(["progress-status",m.value])},d(s.statusMessage),3)):u("",!0),s.details&&s.showDetails?(r(),o("div",W,[(r(!0),o(x,null,B(s.details,(a,i)=>(r(),o("div",{key:i,class:"detail-item"},[c("span",X,d(i)+":",1),c("span",Y,d(a),1)]))),128))])):u("",!0)],2))}}),ee=T(Z,[["__scopeId","data-v-1915e01c"]]),se={class:"px-8 md:px-16 py-2"},te={key:0,class:"mt-4"},ae={key:1,class:"mt-4"},re={key:2,class:"mt-4 p-4 bg-red-500/20 rounded-lg text-sm"},ie={key:3,class:"mt-4 p-4 bg-green-500/20 rounded-lg text-sm"},oe=F({__name:"DeepAnalysisCard",props:["userStore"],setup(s){const t=s,g=k(!1),f=k(0),h=k(0),m=k([{title:"Сбор данных",description:"Получение последних 5 снов",duration:"2-3 сек"},{title:"Анализ паттернов",description:"Поиск повторяющихся тем",duration:"8-12 сек"},{title:"Глубокая интерпретация",description:"Психологический анализ",duration:"10-15 сек"},{title:"Формирование отчета",description:"Создание персонального анализа",duration:"3-5 сек"}]);M(()=>{var l;return(l=t.userStore)==null?void 0:l.isDoingDeepAnalysis},l=>{l?(f.value=0,h.value=0,v()):setTimeout(()=>{f.value=0,h.value=0,m.value.forEach(e=>e.status="pending")},2e3)});const v=()=>{const l=(e,n)=>{h.value=e,f.value=n,m.value.forEach((a,i)=>{i<e?a.status="completed":i===e?a.status="loading":a.status="pending"})};setTimeout(()=>l(0,15),500),setTimeout(()=>l(1,35),2e3),setTimeout(()=>l(2,65),5e3),setTimeout(()=>l(3,90),12e3)},y=()=>{g.value=!g.value,window.triggerHaptic&&window.triggerHaptic("light")},w=()=>{var l,e,n,a,i;(l=t.userStore)!=null&&l.canAttemptDeepAnalysis&&(window.triggerHaptic&&window.triggerHaptic("medium"),(((n=(e=t.userStore)==null?void 0:e.profile)==null?void 0:n.deep_analysis_credits)||0)>0||(((i=(a=t.userStore)==null?void 0:a.profile)==null?void 0:i.free_deep_analysis)||0)>0?t.userStore.performDeepAnalysis():t.userStore.initiateDeepAnalysisPayment())};return(l,e)=>{var n,a,i,S,A,C,_,D,P;return r(),o("article",{class:p(["relative rounded-xl bg-gradient-to-br from-[#9C41FF] to-[#C03AFF] text-white overflow-hidden transition-all cursor-pointer py-6",[g.value?"pb-20":"min-h-[8rem]"]]),onClick:y},[c("div",se,[e[0]||(e[0]=c("h3",{class:"text-xl font-bold"},"Глубокий Анализ",-1)),e[1]||(e[1]=c("p",{class:"mt-1"},"Получите комплексный анализ ваших последних 5 снов.",-1)),(n=s.userStore)!=null&&n.isInitiatingDeepPayment?(r(),o("div",te,[z($,{size:"xs",variant:"white",label:"Создаем счёт..."})])):(a=s.userStore)!=null&&a.isDoingDeepAnalysis?(r(),o("div",ae,[z(ee,{progress:f.value,label:"Глубокий анализ",steps:m.value,currentStep:h.value,variant:"white",size:"sm",showPercentage:"",animated:""},null,8,["progress","steps","currentStep"])])):u("",!0),(i=s.userStore)!=null&&i.deepAnalysisError?(r(),o("div",re," ⚠️ "+d(s.userStore.deepAnalysisError),1)):(S=s.userStore)!=null&&S.deepAnalysisSuccess?(r(),o("div",ie," ✅ Глубокий анализ выполнен! Результат доступен во вкладке «Глубокий анализ» ниже. ")):u("",!0)]),c("div",{class:p(["absolute left-4 right-4 transition-all duration-300",g.value&&((A=s.userStore)!=null&&A.canAttemptDeepAnalysis)?"bottom-4 opacity-100":"-bottom-24 opacity-0 pointer-events-none"])},[c("button",{class:"w-full bg-white/20 hover:bg-white/30 text-white rounded-xl py-3 font-semibold transition-colors",onClick:H(w,["stop"])},d((((_=(C=s.userStore)==null?void 0:C.profile)==null?void 0:_.deep_analysis_credits)||0)>0||(((P=(D=s.userStore)==null?void 0:D.profile)==null?void 0:P.free_deep_analysis)||0)>0?"Выполнить анализ":"Получить анализ (1 ⭐️)"),1)],2)],2)}}}),ue=T(oe,[["__scopeId","data-v-d702295e"]]);export{ue as default};
